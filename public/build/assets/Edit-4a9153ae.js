import{_ as z,o as l,b as r,d as t,t as p,y as b,P as B,g as d,Q as F,F as k,j as C,p as w,A as I,k as Q,R as V,s as A,v as G,C as H,z as J,e as K,B as W}from"./app-742b1e5f.js";import{u as X}from"./roles-2cac5cec.js";import{d as $,u as Y,a as Z,r as ee,m as te}from"./rules-e1952245.js";const se={class:"container"},ae=["value"],ie={class:"middle"},ne=["onClick"],oe=["onClick"],le=["value"],re={__name:"DualListBox",props:{leftLabel:{type:String,required:!0},rightLabel:{type:String,required:!0},leftData:{type:Array,required:!0},rightData:{type:Array,required:!0}},emits:["onChangeList"],setup(P,{emit:n}){let a=[],i=[];const g=n,s=P;function y(){if(!i.length)return;for(let e=i.length;e>0;e--){let u=s.rightData.indexOf(i[e-1]);s.rightData.splice(u,1),s.leftData.push(i[e-1]),i.pop()}let c=s.leftData,o=s.rightData;g("onChangeList",{leftData:c,rightData:o})}function D(){if(!a.length)return;for(let e=a.length;e>0;e--){let u=s.leftData.indexOf(a[e-1]);s.leftData.splice(u,1),s.rightData.push(a[e-1]),a.pop()}let c=s.leftData,o=s.rightData;g("onChangeList",{leftData:c,rightData:o})}return(c,o)=>(l(),r("div",se,[t("div",null,[t("h2",null,p(s.leftLabel),1),b(t("select",{class:"form-select",multiple:"","onUpdate:modelValue":o[0]||(o[0]=e=>F(a)?a.value=e:a=e),onDblclick:D},[(l(!0),r(k,null,C(s.leftData,(e,u)=>(l(),r("option",{value:e,key:e.id},p(e.name),9,ae))),128))],544),[[B,d(a)]])]),t("div",ie,[t("button",{class:"btn btn-primary",onClick:w(D,["prevent"])},"=>",8,ne),t("button",{class:"btn btn-primary",onClick:w(y,["prevent"])},"<=",8,oe)]),t("div",null,[t("h2",null,p(s.rightLabel),1),b(t("select",{class:"form-select",multiple:"","onUpdate:modelValue":o[1]||(o[1]=e=>F(i)?i.value=e:i=e),onDblclick:y},[(l(!0),r(k,null,C(s.rightData,(e,u)=>(l(),r("option",{value:e,key:e.id},p(e.name),9,le))),128))],544),[[B,d(i)]])])]))}},de=z(re,[["__scopeId","data-v-9e45c8bc"]]),ce={class:"row justify-content-center my-5"},ue={class:"col"},me={class:"card border-0 shadow-sm"},_e={class:"card-body"},pe=["onSubmit"],fe={class:"mb-3"},he=t("label",{for:"post-title",class:"form-label"}," Title ",-1),ve={class:"form-outline w-25"},ge={class:"text-danger mt-1"},De={class:"text-danger mt-1"},be={class:"mt-4"},ye=["disabled"],xe={class:""},Le={key:0},ke={key:1},Se={__name:"Edit",async setup(P){let n,a;$("required",ee),$("min",te);const i={name:"required|min:3"},{validate:g,errors:s,resetForm:y}=Y({validationSchema:i}),{value:D}=Z("name",null,{initialValue:""}),{role:c,updateRolePermissions:o,getRole:e,updateRole:u,validationErrors:E,isLoading:x}=X(),f=I({name:D}),S=Q();let L=([n,a]=V(()=>axios.get("/api/permissions/")),n=await n,a(),n),M=L.data.data;L=([n,a]=V(()=>axios.get("/api/role-permissions/"+S.params.id)),n=await n,a(),n);let R=L.data.data,U=T(M,R),O=A(U),q=A(R);function j(){g().then(h=>{if(h.valid){let m=q.value.map(_=>_.id);o(f,m)}})}function N(h){}G(()=>{e(S.params.id)}),H(()=>{f.id=c.value.id,f.name=c.value.name});function T(h,m){return h.filter(_=>!m.some(v=>_.id===v.id))}return(h,m)=>{var _;return l(),r("div",ce,[t("div",ue,[t("div",me,[t("div",_e,[t("form",{onSubmit:w(j,["prevent"])},[t("div",fe,[he,t("div",ve,[b(t("input",{"onUpdate:modelValue":m[0]||(m[0]=v=>f.name=v),id:"post-title",type:"text",class:"form-control"},null,512),[[J,f.name]])]),t("div",ge,p(d(s).name),1),t("div",De,[(l(!0),r(k,null,C((_=d(E))==null?void 0:_.name,v=>(l(),r("div",null,p(v),1))),256))])]),K(de,{leftLabel:"Available Permissions",rightLabel:"Current Permissions",leftData:d(O),rightData:d(q),onOnChangeList:N},null,8,["leftData","rightData"]),t("div",be,[t("button",{disabled:d(x),class:"btn btn-primary"},[b(t("div",xe,null,512),[[W,d(x)]]),d(x)?(l(),r("span",Le,"Processing...")):(l(),r("span",ke,"Update"))],8,ye)])],40,pe)])])])])}}};export{Se as default};
