import{A as T,k as U,v as N,C as A,r as R,o as a,b as l,d as t,y as v,z as j,t as n,g as o,F as u,j as m,e as h,B as y,p as Z,f as g}from"./app-742b1e5f.js";import{u as $}from"./categories-04b92c8a.js";import{u as G}from"./posts-52e589c7.js";import{d as z,u as I,a as p,r as J,m as K}from"./rules-e1952245.js";import{_ as O,D as Q}from"./DropZone-9ee21e4c.js";const W=["onSubmit"],X={class:"row my-5"},Y={class:"col-md-8"},tt={class:"card border-0 shadow-sm"},et={class:"card-body"},st={class:"mb-3"},ot=t("label",{for:"post-title",class:"form-label"}," Title ",-1),at={class:"text-danger mt-1"},lt={class:"text-danger mt-1"},it={class:"mb-3"},nt=t("label",{for:"post-content",class:"form-label"}," Content ",-1),dt={class:"text-danger mt-1"},rt={class:"text-danger mt-1"},ct={class:"col-md-4"},ut={class:"card border-0 shadow-sm"},mt={class:"card-body"},_t=t("h6",null,[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-square",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"})]),g(" Action ")],-1),vt={class:"mt-3 text-center"},ht=["disabled"],pt={class:""},gt={key:0},bt={key:1},wt=["disabled"],ft={class:""},Vt={key:0},xt={key:1},yt=t("h6",{class:"mt-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-square",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"})]),g(" Category ")],-1),zt={class:"mb-3"},Lt={class:"text-danger mt-1"},Ct={class:"text-danger mt-1"},Mt={class:"mb-3"},qt=t("h6",{class:"mt-3"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-square",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 2.5a.5.5 0 0 0-1 0v5.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V4.5z"})]),g(" Thumbnail ")],-1),kt={class:"text-danger mt-1"},Tt={__name:"Edit",setup(Bt){z("required",J),z("min",K);const L={title:"required|min:5",content:"required|min:50",categories:"required"},{validate:C,errors:_,resetForm:St}=I({validationSchema:L}),{value:M}=p("title",null,{initialValue:""}),{value:q}=p("content",null,{initialValue:""}),{value:k}=p("categories",null,{initialValue:"",label:"category"}),{categoryList:B,getCategoryList:S}=$(),{post:r,getPost:D,updatePost:F,validationErrors:c,isLoading:d}=G(),s=T({title:M,content:q,categories:k,thumbnail:""}),H=U();function P(){C().then(b=>{b.valid&&F(s)})}return N(()=>{D(H.params.id),S()}),A(()=>{s.id=r.value.id,s.title=r.value.title,s.content=r.value.content,s.thumbnail=r.value.original_image,s.categories=r.value.categories}),(b,i)=>{var w,f,V,x;const E=R("v-select");return a(),l("form",{onSubmit:Z(P,["prevent"])},[t("div",X,[t("div",Y,[t("div",tt,[t("div",et,[t("div",st,[ot,v(t("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>s.title=e),id:"post-title",type:"text",class:"form-control"},null,512),[[j,s.title]]),t("div",at,n(o(_).title),1),t("div",lt,[(a(!0),l(u,null,m((w=o(c))==null?void 0:w.title,e=>(a(),l("div",null,n(e),1))),256))])]),t("div",it,[nt,h(O,{modelValue:s.content,"onUpdate:modelValue":i[1]||(i[1]=e=>s.content=e)},null,8,["modelValue"]),t("div",dt,n(o(_).content),1),t("div",rt,[(a(!0),l(u,null,m((f=o(c))==null?void 0:f.content,e=>(a(),l("div",null,n(e),1))),256))])])])])]),t("div",ct,[t("div",ut,[t("div",mt,[_t,t("div",vt,[t("button",{disabled:o(d),class:"btn btn btn-outline-primary me-2"},[v(t("div",pt,null,512),[[y,o(d)]]),o(d)?(a(),l("span",gt,"Processing...")):(a(),l("span",bt,"Save Draft"))],8,ht),t("button",{disabled:o(d),class:"btn btn-primary"},[v(t("div",ft,null,512),[[y,o(d)]]),o(d)?(a(),l("span",Vt,"Processing...")):(a(),l("span",xt,"Publish"))],8,wt)]),yt,t("div",zt,[h(E,{multiple:"",modelValue:s.categories,"onUpdate:modelValue":i[2]||(i[2]=e=>s.categories=e),options:o(B),reduce:e=>e.id,label:"name",class:"form-control",placeholder:"Select category"},null,8,["modelValue","options","reduce"]),t("div",Lt,n(o(_).categories),1),t("div",Ct,[(a(!0),l(u,null,m((V=o(c))==null?void 0:V.categories,e=>(a(),l("div",null,n(e),1))),256))])]),t("div",Mt,[qt,h(Q,{modelValue:s.thumbnail,"onUpdate:modelValue":i[3]||(i[3]=e=>s.thumbnail=e)},null,8,["modelValue"]),t("div",kt,[(a(!0),l(u,null,m((x=o(c))==null?void 0:x.thumbnail,e=>(a(),l("div",null,n(e),1))),256))])])])])])])],40,W)}}};export{Tt as default};
