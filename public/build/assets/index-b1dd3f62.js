import{s as p,K as L,L as U,O as S,A as D,v as M,C as R,o as i,b as o,d as e,p as j,y as h,z as w,t as f,g as l,F,j as V,B as N}from"./app-742b1e5f.js";import{d as k,u as T,a as q,r as z,m as A}from"./rules-e1952245.js";function C(){const _=p({name:"",email:""});L();const r=p({}),n=p(!1),d=U("$swal");return{profile:_,getProfile:async()=>{_.value=S.getters["auth/user"]},updateProfile:async c=>{n.value||(n.value=!0,r.value={},axios.put("/api/user",c).then(({data:s})=>{s.success&&(S.commit("auth/SET_USER",s.data),d({icon:"success",title:"Profile updated successfully"}))}).catch(s=>{var u;(u=s.response)!=null&&u.data&&(r.value=s.response.data.errors)}).finally(()=>n.value=!1))},validationErrors:r,isLoading:n}}const K={class:"card border-0"},O=e("div",{class:"card-header bg-transparent"},[e("h5",{class:"float-start"},"Profile")],-1),$={class:"card-body"},G=["onSubmit"],H={class:"mb-3"},I=e("label",{for:"name",class:"form-label"},"Name",-1),J={class:"text-danger mt-1"},Q={class:"text-danger mt-1"},W={class:"mb-3"},X=e("label",{for:"email",class:"form-label"},"Email",-1),Y={class:"text-danger mt-1"},Z={class:"text-danger mt-1"},ee={class:"mb-3"},se=["disabled"],ae={class:""},te={key:0},ie={key:1},ne={__name:"index",setup(_){k("required",z),k("min",A);const r={name:"required|min:3",email:"required"},{validate:n,errors:d}=T({validationSchema:r}),{value:b}=q("name",null,{initialValue:""}),{value:g}=q("email",null,{initialValue:""}),{profile:c,getProfile:s,updateProfile:u,validationErrors:y,isLoading:v}=C(),a=D({name:b,email:g});function B(){n().then(x=>{x.valid&&u(a)})}return M(()=>{s()}),R(()=>{a.name=c.value.name,a.email=c.value.email}),(x,m)=>{var P,E;return i(),o("div",K,[O,e("div",$,[e("form",{onSubmit:j(B,["prevent"])},[e("div",H,[I,h(e("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=t=>a.name=t),class:"form-control",id:"name"},null,512),[[w,a.name]]),e("div",J,f(l(d).name),1),e("div",Q,[(i(!0),o(F,null,V((P=l(y))==null?void 0:P.name,t=>(i(),o("div",null,f(t),1))),256))])]),e("div",W,[X,h(e("input",{type:"email","onUpdate:modelValue":m[1]||(m[1]=t=>a.email=t),class:"form-control",id:"email"},null,512),[[w,a.email]]),e("div",Y,f(l(d).email),1),e("div",Z,[(i(!0),o(F,null,V((E=l(y))==null?void 0:E.email,t=>(i(),o("div",null,f(t),1))),256))])]),e("div",ee,[e("button",{disabled:l(v),class:"btn btn-primary"},[h(e("div",ae,null,512),[[N,l(v)]]),l(v)?(i(),o("span",te,"Processing...")):(i(),o("span",ie,"Update"))],8,se)])],40,G)])])}}};export{ne as default};
